<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ben tossell</title>
    <meta name="description" content="ben tossell's personal site">
    <link rel="icon" type="image/png" href="assets/images/favicon.png">
    <link rel="apple-touch-icon" href="assets/images/apple-touch-icon.png">
    <link href="https://fonts.googleapis.com/css2?display=swap&family=Inter:wght@300;400;600" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/styles.css">
</head>
<body>
    <header class="topbar">
        <div class="title-block">
            <h1>ben tossell</h1>
            <p class="commit-info" id="commit-info">Loading commit info...</p>
        </div>
        <div class="actions">
            <button id="share" title="share bens site" aria-label="Share" class="icon-btn" type="button">
                <div class="relative">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-share-icon lucide-share" viewBox="0 0 24 24"><path d="M4 12v7a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7"/><polyline points="16 6 12 2 8 6"/><line x1="12" x2="12" y1="2" y2="15"/></svg>
                </div>
            </button>
            <a href="https://x.com/bentossell/" target="_blank" rel="noopener" aria-label="X" class="icon-btn">
                <div class="relative">
                    <!-- Official Lucide Twitter SVG -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-twitter" viewBox="0 0 24 24"><path d="M22 4.01c-.75.35-1.56.59-2.41.7A4.16 4.16 0 0 0 21.44 2c-.81.48-1.7.83-2.65 1.02A4.13 4.13 0 0 0 12 7.11c0 .32.04.64.1.94C8.28 7.89 5.1 6.1 2.99 3.61c-.35.6-.55 1.29-.55 2.02 0 1.39.71 2.62 1.78 3.34-.66-.02-1.28-.2-1.82-.5v.05c0 1.94 1.4 3.57 3.25 3.94-.34.09-.7.14-1.07.14-.26 0-.5-.03-.75-.07.51 1.58 2 2.73 3.76 2.76A8.3 8.3 0 0 1 2 19.54a11.73 11.73 0 0 0 6.29 1.85c7.55 0 11.69-6.26 11.69-11.7l-.01-.53A8.07 8.07 0 0 0 22 4.01Z"/></svg>
                </div>
            </a>
            <a href="https://www.linkedin.com/in/ben-tossell-70453537/" target="_blank" rel="noopener" aria-label="LinkedIn" class="icon-btn">
                <div class="relative">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-linkedin-icon lucide-linkedin" viewBox="0 0 24 24"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-4 0v7h-4v-7a6 6 0 0 1 6-6z"/><rect width="4" height="12" x="2" y="9"/><circle cx="4" cy="4" r="2"/></svg>
                </div>
            </a>
            <a href="https://github.com/bentossell" target="_blank" rel="noopener" aria-label="GitHub" class="icon-btn">
                <div class="relative">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github-icon lucide-github" viewBox="0 0 24 24"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.091 1 5.091 1A5.07 5.07 0 0 0 5 4.77 5.44 5.44 0 0 0 3.5 9.5c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 21.13V25"/></svg>
                </div>
            </a>
            <button id="theme-toggle" aria-label="Toggle dark mode" class="icon-btn" type="button">
                <div class="relative">
                    <svg id="theme-toggle-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon-icon lucide-moon" viewBox="0 0 24 24" style="transition: color 0.2s;"><path d="M21 12.79A9 9 0 1111.21 3a7 7 0 009.79 9.79z"/></svg>
                </div>
            </button>
        </div>
    </header>
    <div class="container">
        <aside class="sidebar">
            <h5 class>now:</h5>
            <ul>
                <li>founder &amp; solo-gp <a href="https://bensbites.com" target="_blank" rel="noopener">ben's bites</a></li>
                <li>i invest $100-200k into technical founders building technical tools like; supabase, etched, sf compute, factory, wordware, crewai, see my investments.md</li>
                <li>i write a newsletter where I show what tools im building with, interesting tools and content im seeing. 125k+ others love it</li>
                <li>twin dad (1 of each btw)</li>
            </ul>
            <h5 class>previously:</h5>
            <ul>
                <li>built and sold the biggest no-code community, makerpad, to zapier (in 18 months)</li>
                <li>scouted for a16z and invested in; gamma, cosine, and more</li>
                <li>led the product hunt community &amp; homepage, testing 1000s of products along the way</li>
                <li>lived in china when I was in uni</li>
            </ul>
            <h5 class="testing-title">testing</h5>
            <ul class="testing-list">
                <li><svg viewBox="0 0 16 16" class="check"><path d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg><code>codex</code><button class="more" aria-label="More"><svg viewBox="0 0 16 16"><path d="M10 13a1 1 0 100-2 1 1 0 000 2zm-4 0a1 1 0 100-2 1 1 0 000 2zm1-5a1 1 0 11-2 0 1 1 0 012 0zm3 1a1 1 0 100-2 1 1 0 000 2z"></path></svg></button></li>
            </ul>
        </aside>
        <div class="resizer"></div>
        <main class="content">
            <div class="tabs">
                <button class="tab-trigger active" data-tab="investments">investments</button>
                <button class="tab-trigger" data-tab="tools">tools i use</button>
                <button class="tab-trigger" data-tab="blog">blog</button>
            </div>
            <div class="tab-content active" id="investments">
                <div class="file-header">
                    <button class="file-btn"><svg viewBox="0 0 16 16"><path d="M3.75 1.5a.25.25 0 00-.25.25v12.5c0 .138.112.25.25.25h9.5a.25.25 0 00.25-.25V4.664a.25.25 0 00-.073-.177l-2.914-2.914a.25.25 0 00-.177-.073H3.75zM2 1.75C2 .784 2.784 0 3.75 0h6.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0113.25 16h-9.5A1.75 1.75 0 012 14.25V1.75z"></path><path d="M4.75 4a.75.75 0 01.75.75v2.5a.75.75 0 01-1.5 0v-2.5A.75.75 0 014.75 4zm4.25 0a.75.75 0 000 1.5h1.5a.75.75 0 000-1.5H9z"></path></svg><span>investments.md</span></button>
                    <div class="badges"><span class="badge green">+0</span><span class="badge red">-0</span></div>
                </div>
                <div class="diff-block" id="investments-content">Loading...</div>
            </div>
            <div class="tab-content" id="tools">
                <div class="file-header">
                    <button class="file-btn"><svg viewBox="0 0 16 16"><path d="M3.75 1.5a.25.25 0 00-.25.25v12.5c0 .138.112.25.25.25h9.5a.25.25 0 00.25-.25V4.664a.25.25 0 00-.073-.177l-2.914-2.914a.25.25 0 00-.177-.073H3.75zM2 1.75C2 .784 2.784 0 3.75 0h6.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0113.25 16h-9.5A1.75 1.75 0 012 14.25V1.75z"></path><path d="M4.75 4a.75.75 0 01.75.75v2.5a.75.75 0 01-1.5 0v-2.5A.75.75 0 014.75 4zm4.25 0a.75.75 0 000 1.5h1.5a.75.75 0 000-1.5H9z"></path></svg><span>tools.md</span></button>
                    <div class="badges"><span class="badge green">+0</span><span class="badge red">-0</span></div>
                </div>
                <div class="diff-block" id="tools-content">Select a tab to load</div>
            </div>
            <div class="tab-content" id="blog">
                <div class="file-header">
                    <button class="file-btn"><svg viewBox="0 0 16 16"><path d="M3.75 1.5a.25.25 0 00-.25.25v12.5c0 .138.112.25.25.25h9.5a.25.25 0 00.25-.25V4.664a.25.25 0 00-.073-.177l-2.914-2.914a.25.25 0 00-.177-.073H3.75zM2 1.75C2 .784 2.784 0 3.75 0h6.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0113.25 16h-9.5A1.75 1.75 0 012 14.25V1.75z"></path><path d="M4.75 4a.75.75 0 01.75.75v2.5a.75.75 0 01-1.5 0v-2.5A.75.75 0 014.75 4zm4.25 0a.75.75 0 000 1.5h1.5a.75.75 0 000-1.5H9z"></path></svg><span>blog/</span></button>
                    <div class="badges"><span class="badge green">+0</span><span class="badge red">-0</span></div>
                </div>
                <div class="diff-block blog-content" id="blog-content">Select a tab to load</div>
            </div>
        </main>
    </div>

    <!-- Command Palette Modal -->
    <div id="command-palette" class="command-palette">
        <div class="command-palette-content">
            <div class="command-palette-header">
                <h2>Keyboard Shortcuts</h2>
                <button id="close-command-palette" class="icon-btn" aria-label="Close command palette">
                    <div class="relative">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </div>
                </button>
            </div>
            <div class="command-palette-body">
                <div class="shortcut-group">
                    <h3>Navigation</h3>
                    <div class="shortcut-item">
                        <div class="shortcut-keys">
                            <kbd>i</kbd>
                        </div>
                        <div class="shortcut-description">Go to Investments tab</div>
                    </div>
                    <div class="shortcut-item">
                        <div class="shortcut-keys">
                            <kbd>t</kbd>
                        </div>
                        <div class="shortcut-description">Go to Tools tab</div>
                    </div>
                    <div class="shortcut-item">
                        <div class="shortcut-keys">
                            <kbd>b</kbd>
                        </div>
                        <div class="shortcut-description">Go to Blog tab</div>
                    </div>
                </div>
                <div class="shortcut-group">
                    <h3>Commands</h3>
                    <div class="shortcut-item">
                        <div class="shortcut-keys">
                            <kbd><span class="cmd-key">⌘</span>+k</kbd>
                        </div>
                        <div class="shortcut-description">Toggle command palette</div>
                    </div>
                    <div class="shortcut-item">
                        <div class="shortcut-keys">
                            <kbd>Esc</kbd>
                        </div>
                        <div class="shortcut-description">Close command palette</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mini Music Player -->
    <div class="mini-music-player minimized" aria-label="Mini music player">
        <!-- Controls Row -->
        <div class="player-controls">
            <button class="icon-btn" id="prev-track" aria-label="Previous track" type="button">
                <div class="relative">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none"
                         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                         class="lucide lucide-skip-back">
                        <polygon points="19 20 9 12 19 4 19 20"></polygon>
                        <line x1="5" y1="19" x2="5" y2="5"></line>
                    </svg>
                </div>
            </button>
            <button class="icon-btn" id="play-pause" aria-label="Play or pause" type="button">
                <div class="relative">
                    <svg id="play-pause-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none"
                         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                         class="lucide lucide-play">
                        <polygon points="5 3 19 12 5 21 5 3"></polygon>
                    </svg>
                </div>
            </button>
            <button class="icon-btn" id="next-track" aria-label="Next track" type="button">
                <div class="relative">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none"
                         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                         class="lucide lucide-skip-forward">
                        <polygon points="5 4 15 12 5 20 5 4"></polygon>
                        <line x1="19" y1="5" x2="19" y2="19"></line>
                    </svg>
                </div>
            </button>
            <button class="icon-btn" id="volume-toggle" aria-label="Toggle mute" type="button">
                <div class="relative">
                    <svg id="volume-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none"
                         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                         class="lucide lucide-volume-2">
                        <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                        <path d="M19.07 4.93a10 10 0 0 1 0 14.14"></path>
                        <path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>
                    </svg>
                </div>
            </button>
            <button class="icon-btn" id="toggle-player" aria-label="Expand or collapse player" type="button">
                <div class="relative">
                    <svg id="toggle-player-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none"
                         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                         class="lucide lucide-chevron-up">
                        <polyline points="18 15 12 9 6 15"></polyline>
                    </svg>
                </div>
            </button>
        </div>

        <!-- Expanded Details -->
        <div class="player-details">
            <div class="track-info">
                <span id="track-title">Track Title</span> &mdash; <span id="track-artist">Artist</span>
            </div>
            <div class="progress-wrapper">
                <span id="current-time" class="time">0:00</span>
                <input type="range" id="progress-bar" min="0" max="100" value="0" aria-label="Seek bar">
                <span id="duration" class="time">0:00</span>
            </div>
        </div>
        <!-- (Audio element will be inserted / controlled via JS) -->
    </div>

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script>
    document.getElementById('share').addEventListener('click', async () => {
        try {
            await navigator.clipboard.writeText(window.location.href);
        } catch (e) {
            console.error('Copy failed', e);
        }
    });
    // simple tabs
    const repoBase = "https://raw.githubusercontent.com/bentossell/bentossell/main/";
    
    async function loadMarkdown(file, target, isRichContent = false){
        try{
            const resp = await fetch(repoBase + file);
            if(!resp.ok) throw new Error('fetch failed');
            const text = await resp.text();
            
            if (isRichContent) {
                // Use marked.js for rich markdown rendering
                const htmlContent = marked.parse(text);
                document.getElementById(target).innerHTML = htmlContent;
            } else {
                // Simple rendering for existing tabs
                const escaped = text
                    .replace(/&/g, '&amp;')
                    .replace(/</g, '&lt;')
                    .replace(/>/g, '&gt;');
                const linked = escaped.replace(/\[([^\]]+)\]\(([^\)]+)\)/g,
                    '<a href="$2" target="_blank" rel="noopener">[$1]($2)</a>');
                document.getElementById(target).innerHTML = '<code>' + linked + '</code>';
            }
        }catch(e){
            document.getElementById(target).textContent = 'Failed to load';
        }
    }

    async function loadBlogIndex(target) {
        try {
            const resp = await fetch(repoBase + 'blog/index.md');
            if(!resp.ok) throw new Error('fetch failed');
            const text = await resp.text();
            const htmlContent = marked.parse(text);
            document.getElementById(target).innerHTML = htmlContent;
            
            // Add click handlers for blog post links
            const blogLinks = document.querySelectorAll('#blog-content a[href*="/blog/posts/"]');
            blogLinks.forEach(link => {
                link.addEventListener('click', async (e) => {
                    e.preventDefault();
                    const postPath = link.getAttribute('href').replace('/blog/posts/', 'blog/posts/');
                    await loadBlogPost(postPath, target);
                });
            });
        } catch(e) {
            document.getElementById(target).textContent = 'Failed to load blog';
        }
    }

    async function loadBlogPost(postPath, target) {
        try {
            const resp = await fetch(repoBase + postPath);
            if(!resp.ok) throw new Error('fetch failed');
            const text = await resp.text();
            
            // Parse frontmatter and content
            const frontmatterRegex = /^---\n([\s\S]*?)\n---\n([\s\S]*)$/;
            const match = text.match(frontmatterRegex);
            
            let content = text;
            let frontmatter = {};
            
            if (match) {
                // Parse YAML-like frontmatter
                const frontmatterText = match[1];
                content = match[2];
                
                frontmatterText.split('\n').forEach(line => {
                    const colonIndex = line.indexOf(':');
                    if (colonIndex > -1) {
                        const key = line.substring(0, colonIndex).trim();
                        const value = line.substring(colonIndex + 1).trim().replace(/^["']|["']$/g, '');
                        frontmatter[key] = value;
                    }
                });
            }
            
            // Render content with marked.js
            const htmlContent = marked.parse(content);
            
            // Create blog post HTML with back button
            const blogPostHtml = `
                <div class="blog-post">
                    <button class="back-to-blog" onclick="loadBlogIndex('blog-content')">&larr; Back to Blog</button>
                    ${frontmatter.date ? `<div class="blog-meta">Published on ${formatDate(frontmatter.date)}</div>` : ''}
                    ${htmlContent}
                </div>
            `;
            
            document.getElementById(target).innerHTML = blogPostHtml;
        } catch(e) {
            document.getElementById(target).textContent = 'Failed to load blog post';
        }
    }

    function formatDate(dateStr) {
        const date = new Date(dateStr);
        return date.toLocaleDateString('en-US', { 
            year: 'numeric', 
            month: 'long', 
            day: 'numeric' 
        });
    }
      function handleTabChange(tab){
        if(tab === "investments"){
            loadMarkdown("investments.md","investments-content");
        }else if(tab === "tools"){
            loadMarkdown("tools.md","tools-content");
        }else if(tab === "blog"){
            loadBlogIndex("blog-content");
        }
      }

      function animateSidebarLines(){
          const lines = document.querySelectorAll('.sidebar li, .sidebar h5');
          lines.forEach((el, idx) => {
              setTimeout(() => { el.style.opacity = '1'; }, idx * 80);
          });
      }
      document.querySelectorAll('.tab-trigger').forEach(btn => {
          btn.addEventListener('click', () => {
              document.querySelectorAll('.tab-trigger').forEach(b => b.classList.remove('active'));
              document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
              btn.classList.add('active');
            const id = btn.dataset.tab;
            document.getElementById(id).classList.add('active');
            handleTabChange(id);
        });
      });
      // sidebar resize
      handleTabChange("investments");
      animateSidebarLines();
      const sidebar = document.querySelector('.sidebar');
      const resizer = document.querySelector('.resizer');
    let startX = 0;
    let startWidth = 0;
    function onMouseMove(e){
        const delta = e.clientX - startX;
        const width = Math.min(600, Math.max(250, startWidth + delta));
        sidebar.style.width = width + 'px';
    }
    function onMouseUp(){
        document.body.classList.remove('resizing');
        document.removeEventListener('mousemove', onMouseMove);
        document.removeEventListener('mouseup', onMouseUp);
    }
    resizer.addEventListener('mousedown', e => {
        startX = e.clientX;
        startWidth = sidebar.offsetWidth;
        document.body.classList.add('resizing');
        document.addEventListener('mousemove', onMouseMove);
        document.addEventListener('mouseup', onMouseUp);
    });
    // theme toggle
    const themeToggleBtn = document.getElementById('theme-toggle');
    const themeIcon = document.getElementById('theme-toggle-icon');
    function updateThemeIcon(){
        if(document.body.classList.contains('dark-mode')){
            themeIcon.setAttribute('class', 'lucide lucide-sun-icon lucide-sun');
            themeIcon.innerHTML = '<circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>';
        } else {
            themeIcon.setAttribute('class', 'lucide lucide-moon-icon lucide-moon');
            themeIcon.innerHTML = '<path d="M21 12.79A9 9 0 1111.21 3a7 7 0 009.79 9.79z"/>';
        }
    }
    themeToggleBtn.addEventListener('click', () => {
        document.body.classList.toggle('dark-mode');
        updateThemeIcon();
    });
    updateThemeIcon();

    // --- GitHub commit info updater ---
    async function fetchLatestCommit() {
        try {
            // Get the latest commit from the main branch
            const repo = "bentossell/bentossell";
            const commitApi = `https://api.github.com/repos/${repo}/commits?per_page=1&sha=main`;
            const resp = await fetch(commitApi, { headers: { 'Accept': 'application/vnd.github+json' }});
            if (!resp.ok) throw new Error("Failed to fetch commit info");
            const [commit] = await resp.json();

            // Get stats for the latest commit
            const commitSha = commit.sha;
            const commitUrl = commit.html_url;
            const author = commit.commit.author.name;
            const date = new Date(commit.commit.author.date);
            const dateStr = date.toLocaleDateString(undefined, { day: "2-digit", month: "short" });
            
            // Get the commit stats (additions/deletions)
            const detailResp = await fetch(`https://api.github.com/repos/${repo}/commits/${commitSha}`, {
                headers: { 'Accept': 'application/vnd.github+json' }
            });
            if (!detailResp.ok) throw new Error("Failed to fetch commit details");
            const details = await detailResp.json();
            const additions = details.stats.additions;
            const deletions = details.stats.deletions;

            // Compose the commit info string
            // Example: "17 May bentossell/bentossell +4 -0"
            const info = `${dateStr} <a href="${commitUrl}" target="_blank" rel="noopener">${repo}</a> +${additions} -${deletions}`;
            document.getElementById("commit-info").innerHTML = info;
        } catch (err) {
            document.getElementById("commit-info").textContent = "cant load commit info";
        }
    }
    fetchLatestCommit();
    setInterval(fetchLatestCommit, 15 * 60 * 1000); // Update every 15 minutes

    // --- Keyboard shortcuts and command palette ---
    const commandPalette = document.getElementById('command-palette');
    const closeCommandPaletteBtn = document.getElementById('close-command-palette');

    // Toggle command palette visibility
    function toggleCommandPalette() {
        commandPalette.classList.toggle('active');
    }

    // Close command palette
    function closeCommandPalette() {
        commandPalette.classList.remove('active');
    }

    // Navigate to a specific tab
    function navigateToTab(tabId) {
        const tabTrigger = document.querySelector(`.tab-trigger[data-tab="${tabId}"]`);
        if (tabTrigger) {
            tabTrigger.click();
        }
    }

    // Close button event listener
    closeCommandPaletteBtn.addEventListener('click', closeCommandPalette);

    // Global keyboard event listener
    document.addEventListener('keydown', function(event) {
        // Skip if user is typing in an input or textarea
        if (event.target.tagName === 'INPUT' || event.target.tagName === 'TEXTAREA') {
            return;
        }

        // Command+K (or Ctrl+K) to toggle command palette
        if ((event.metaKey || event.ctrlKey) && event.key === 'k') {
            event.preventDefault();
            toggleCommandPalette();
        } 
        // Escape to close command palette
        else if (event.key === 'Escape') {
            closeCommandPalette();
        } 
        // 'i' to navigate to investments tab
        else if (event.key === 'i' && !commandPalette.classList.contains('active')) {
            navigateToTab('investments');
        } 
        // 't' to navigate to tools tab
        else if (event.key === 't' && !commandPalette.classList.contains('active')) {
            navigateToTab('tools');
        }
        // 'b' to navigate to blog tab
        else if (event.key === 'b' && !commandPalette.classList.contains('active')) {
            navigateToTab('blog');
        }
    });

    /* ===== MINI MUSIC PLAYER LOGIC ===== */
    (function () {
        // --- Elements ---
        const player      = document.querySelector('.mini-music-player');
        const playBtn     = document.getElementById('play-pause');
        const prevBtn     = document.getElementById('prev-track');
        const nextBtn     = document.getElementById('next-track');
        const volumeBtn   = document.getElementById('volume-toggle');
        const toggleBtn   = document.getElementById('toggle-player');
        const progressBar = document.getElementById('progress-bar');
        const titleEl     = document.getElementById('track-title');
        const artistEl    = document.getElementById('track-artist');
        const currentTimeEl = document.getElementById('current-time');
        const durationEl    = document.getElementById('duration');
        const playIcon   = document.getElementById('play-pause-icon');
        const volumeIcon = document.getElementById('volume-icon');
        const chevronIcon = document.getElementById('toggle-player-icon');

        // --- Demo playlist (replace with real mp3 urls) ---
        const playlist = [
            { title: 'Demo Track 1', artist: 'Unknown', src: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3' },
            { title: 'Demo Track 2', artist: 'Unknown', src: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3' },
            { title: 'Demo Track 3', artist: 'Unknown', src: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3' }
        ];

        let currentIndex = 0;
        const audio = new Audio();
        audio.preload = 'metadata';

        /* ---------- Helpers ---------- */
        function format(sec) {
            const m = Math.floor(sec / 60) || 0;
            const s = Math.floor(sec % 60) || 0;
            return `${m}:${s.toString().padStart(2,'0')}`;
        }

        function updateIcons(isPlaying = !audio.paused) {
            playIcon.innerHTML = isPlaying
                ? '<rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect>'
                : '<polygon points="5 3 19 12 5 21 5 3"></polygon>';
        }

        function updateVolumeIcon() {
            volumeIcon.innerHTML = audio.muted || audio.volume === 0
                ? '<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><line x1="23" y1="9" x2="17" y2="15"></line><line x1="17" y1="9" x2="23" y2="15"></line>'
                : '<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14"></path><path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>';
        }

        function loadTrack(index) {
            currentIndex = (index + playlist.length) % playlist.length;
            const track = playlist[currentIndex];
            audio.src = track.src;
            titleEl.textContent = track.title;
            artistEl.textContent = track.artist;
            audio.load();
            progressBar.value = 0;
            currentTimeEl.textContent = '0:00';
            durationEl.textContent = '--:--';
        }

        function playTrack() {
            audio.play();
            updateIcons(true);
        }

        function pauseTrack() {
            audio.pause();
            updateIcons(false);
        }

        /* ---------- Event bindings ---------- */
        playBtn.addEventListener('click', () => {
            audio.paused ? playTrack() : pauseTrack();
        });

        prevBtn.addEventListener('click', () => {
            loadTrack(currentIndex - 1);
            playTrack();
        });

        nextBtn.addEventListener('click', () => {
            loadTrack(currentIndex + 1);
            playTrack();
        });

        volumeBtn.addEventListener('click', () => {
            audio.muted = !audio.muted;
            updateVolumeIcon();
        });

        toggleBtn.addEventListener('click', () => {
            const minimized = player.classList.toggle('minimized');
            player.classList.toggle('expanded', !minimized);
            chevronIcon.innerHTML = minimized
                ? '<polyline points="18 15 12 9 6 15"></polyline>'
                : '<polyline points="6 9 12 15 18 9"></polyline>';
        });

        progressBar.addEventListener('input', () => {
            const seekTime = (progressBar.value / 100) * audio.duration;
            audio.currentTime = seekTime;
        });

        audio.addEventListener('timeupdate', () => {
            if (!isNaN(audio.duration)) {
                const percent = (audio.currentTime / audio.duration) * 100;
                progressBar.value = percent;
                currentTimeEl.textContent = format(audio.currentTime);
                durationEl.textContent = format(audio.duration);
            }
        });

        audio.addEventListener('ended', () => nextBtn.click());
        audio.addEventListener('volumechange', updateVolumeIcon);

        // Initialize
        loadTrack(currentIndex);
        updateIcons(false);
        updateVolumeIcon();
    })();
    </script>
</body>
</html>
